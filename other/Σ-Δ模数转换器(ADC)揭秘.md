# Σ-Δ模数转换器(ADC)揭秘

> 摘自[Σ-Δ模数转换器(ADC)揭秘](https://www.maximintegrated.com/cn/design/technical-documents/tutorials/1/1870.html)

*摘要 :* *本文深入介绍Σ-Δ模/数转换器(ADC)的工作原理，重点关注难以理解的数字概念:过采样、噪声整形和抽样滤波等。同时包括Σ-Δ转换器的多种应用。*



最新的Σ-Δ转换器通常具有较高分辨率、高度集成、低功耗以及较低成本，使其成为过程控制、高精度温度测量以及电子称等应用的上佳[ADC](https://www.maximintegrated.com/cn/products/analog/data-converters/analog-to-digital-converters.html)选择。但由于设计者往往不太了解Σ-Δ类型的转换器，而选择传统的SAR ADC。Σ-Δ转换器(1位ADC)的模拟侧非常简单；数字侧执行滤波和抽样，比较复杂，这部分使得Σ-Δ ADC的生产成本较低。为理解转换器工作原理，您必须熟悉过采样、噪声整形、数字滤波以及抽样等概念。本应用笔记涵盖了上述主题。过采样首先，考虑输入信号为正弦波时传统多位ADC的频域传递函数。以频率Fs对该输入进行采样。根据奈奎斯特定理，Fs必须至少为输入信号带宽的两倍。观察数字输出的FFT分析结果，我们可看到一个单音和大量随机噪声，从直流延伸至Fs/2 (图1)。这些噪声称为量化噪声，对该结果可以按照以下考虑：ADC输入为连续信号，具有无限可能的状态，但数字输出为离散函数，其不同状态的数量取决于转换器的分辨率。所以，从模拟到数字的转换损失了某些信息，在信号中引入了一定程度的失真。该误差的幅值是随机的，最大为±LSB。

![多位ADC的FFT谱图，采样频率为FS](https://www.maximintegrated.com/content/dam/images/design/tech-docs/1870/1870Fig01.gif) 

图1. 多位ADC的FFT谱图，采样频率为FS

如果我们将基频幅值除以所有噪声频率的RMS和，则得到信噪比(SNR)。对于N位的ADC，SNR = 6.02N + 1.76dB。为提高传统ADC的SNR(并进而提高信号复现的精度)，就必须提高位数。仍以上例为例，但将采样频率提高，采用过采样因子k，达到kFs(图2)。FFT分析结果表明噪底降低。SNR与之前相同，但噪声能量已经分散至较宽的频率范围。Σ-Δ转换器利用这一原理，在1位ADC之后增加了数字滤波器(图3)。由于大多数噪声被数字滤波器滤除，所以RMS噪声较低。这种方法使得Σ-Δ转换器以较低分辨率的ADC实现较宽动态范围。

![多位ADC的FFT谱图，采样频率为kFS](https://www.maximintegrated.com/content/dam/images/design/tech-docs/1870/1870Fig02.gif) 

图2. 多位ADC的FFT谱图，采样频率为kFS

![数字滤波对噪声带宽的作用](https://www.maximintegrated.com/content/dam/images/design/tech-docs/1870/1870Fig03.gif) 

*图3. 数字滤波对噪声带宽的作用*

SNR改善仅仅受益于过采样和滤波吗？注意，1位ADC的SNR为7.78dB (6.02 + 1.76)。过采样因子每提高4，SNR增大6dB，每提高6dB则相当于增加1位。如果1位ADC的过采样为24倍，则达到4位的分辨率；那么为了实现16位的分辨率就必须采用过采样因子415，这很不现实。但是，Σ-Δ转换器利用噪声整形技术克服了这一限制，实现每4倍过采样得到的增益超过6dB。噪声整形为理解噪声整形，我们首先看看一阶Σ-Δ调制器的方框图(图4)，其中包括差分放大器、积分器和比较器，以及包含1位[DAC](https://www.maximintegrated.com/cn/products/analog/data-converters/digital-to-analog-converters.html)的反馈环路。(该DAC为简单开关，将差分放大器的负输入连接至正或负基准电压)。反馈DAC的目的是将积分器的平均输出维持在接近比较器的基准电平。

![Σ-Δ调制器方框图](https://www.maximintegrated.com/content/dam/images/design/tech-docs/1870/1870Fig04.gif) 

图4. Σ-Δ调制器方框图

调制器输出端“1”的密度与输入信号成比例。输入增大时，比较器产生大量“1”；输入减小时则相反。通过对误差电压求和，积分器对于输入信号为低通滤波器，对于量化噪声为高通滤波器。所以，大多数量化噪声被搬移至较高频率(图5)。过采样不仅改变总噪声功率，而且改变了其分布。

![Σ-Δ调制器中积分器的作用](https://www.maximintegrated.com/content/dam/images/design/tech-docs/1870/1870Fig05.gif) 

图5. Σ-Δ调制器中积分器的作用

如果我们在噪声整形Σ-Δ调制器上增加一个数字滤波器，则能够滤除比简单过采样更多的噪声(图6)。采样率每增加一倍，这种调制器(1阶)提供9dB的SNR改善。对于更高阶的量化，我们可在Σ-Δ调制器中包含多级积分和求和。例如，图7所示的2阶Σ-Δ调制器，采样率每增加一倍，提供15dB的SNR改善。图8所示为Σ-Δ调制器阶数与达到特定SNR所需的过采样之间的关系。

![数字滤波器对整形噪声的作用](https://www.maximintegrated.com/content/dam/images/design/tech-docs/1870/1870Fig06.gif) 

图6. 数字滤波器对整形噪声的作用

![利用多级积分和求和实现较高阶的量化噪声](https://www.maximintegrated.com/content/dam/images/design/tech-docs/1870/1870Fig07.gif) 

图7. 利用多级积分和求和实现较高阶的量化噪声

![Σ-Δ调制器阶数与达到特定SNR所需的过采样之间的关系](https://www.maximintegrated.com/content/dam/images/design/tech-docs/1870/1870Fig08.gif) 

图8. Σ-Δ调制器阶数与达到特定SNR所需的过采样之间的关系。

数字和抽样滤波器Σ-Δ调制器的输出为1位数据流，采样率可达到兆赫兹范围。数字和抽样滤波器(图9)的目的是从该数据流中析取信息，将数据率降低为更有用的值。在Σ-Δ ADC中，数字滤波器对1位数据流进行平均，提高ADC分辨率，并滤除带外量化噪声。它决定了信号带宽、建立时间和阻带抑制

![Σ-Δ调制器的数字侧](https://www.maximintegrated.com/content/dam/images/design/tech-docs/1870/1870Fig09.gif) 

图9. Σ-Δ调制器的数字侧

Σ-Δ转换器中，广泛用于执行低通功能的滤波器结构为Sinc³型(图10)。该滤波器的主要优点是其陷波响应，(例如)设置为电网频率时可抑制该频率。陷波位置与输出数据率(1/数据字周期)直接相关。SINC³滤波器的建立时间为三个数据字周期。对于60Hz陷波(60Hz数据率)，建立时间为3/60Hz = 50ms。对于要求较低分辨率和较快建立时间的应用，可考虑[MAX1400](https://www.maximintegrated.com/cn/products/MAX1400)家族ADC，可选择滤波器类型(SINC¹或SINC³)。![Sinc³滤波器的低通函数](https://www.maximintegrated.com/content/dam/images/design/tech-docs/1870/1870Fig10.gif) 

图10. Sinc³滤波器的低通函数

SINC¹滤波器的建立时间为一个数据字。在上例中，1/60Hz = 16.7ms。由于数字输出滤波器降低了带宽，即使输出数据率低于原始采样率，也满足奈奎斯特准则。为实现这一目的，可保留特定的输入采样，而丢弃其余采样。该过程被称为以因子M(抽样比)进行抽样。如果输出数据率高于信号带宽的两倍，M可为任意整数值(图11)。如果输入采样频率为fs，则可将滤波器输出数据率降低至fs/M，不会损失信息。

![抽样不会造成任何信息损失](https://www.maximintegrated.com/content/dam/images/design/tech-docs/1870/1870Fig11.gif) 

图11. 抽样不会造成任何信息损失

Maxim的Σ-Δ ADC新型高度集成Σ-Δ ADC以最少数量的外部元件处理小信号。例如，[MAX1402](https://www.maximintegrated.com/cn/products/MAX1402)芯片包括众多功能，被作为片上系统(图12)。器件在工作模式下的静态电流低至250µA(关断模式下为2µA)，480sps速率时的精度为16位，4800sps速率时的精度为12位。

![MAX1402方框图](https://www.maximintegrated.com/content/dam/images/design/tech-docs/1870/1870Fig12.gif) 

图12. MAX1402方框图

MAX1402信号链包括：灵活的输入多路复用器(可设置为三路全差分信号或五路伪差分信号)、两个斩波放大器、可编程PGA(增益从1至128)、用于消除系统失调的粗调DAC、2阶Σ-Δ调制器。集成数字滤波器可配置为SINC¹或SINC³，对1位数据流进行滤波。通过SPI/QSPI™兼容、3线串行接口提供转换结果。芯片还包括两路全差分输入通道(用于校准失调和增益)、两路匹配的200µA变送器激励电流(适合3线和4线RTD应用)，以及两路用于测试所选变送器完整性的微小电流源。器件可编程，通过串行接口访问八个内部寄存器，以选择工作模式。设置SCAN控制位置位时，使能芯片根据命令或连续读取输入通道；输入通道用附加至每个转换结果的3位“通道识别码”表示。图13为正确的输入电压范围，由U/B-bar位、Vref、PGA和DAC设置决定。DAC编码为“0000”时，无失调。例如，Vref = 2.5V时，将DAC设置为“1110”，PGA设置为“000”，将U/B-bar位设置为“0”，可实现0V至5V满幅范围。

![MAX1402输入电压范围设置](https://www.maximintegrated.com/content/dam/images/design/tech-docs/1870/1870Fig13.gif) 

图13. MAX1402输入电压范围设置

可利用两路校准通道(CALOFF和CALGAIN)修正测量结果。为实现以上目的，将CALOFF输入连接至地，将CALGAIN输入连接至基准电压。将这些通道的平均测量值用于以下插值公式：电压 = [Vref × (编码-CALOFF编码)]/[(CALGAIN编码-CALOFF编码) × PGA增益]。Σ-Δ ADC的应用**带冷端补偿的热电偶测量** 为消除热电偶引线拾取的噪声，这种应用中的MAX1402(图14)采用缓冲模式，允许前端具有较大去耦电容。该模式下，由于降低了可用的共模范围，必须将AIN2输入偏置在基准电压(2.5V)。热电偶测量带来了热电势问题，热电势是由将热电偶探头连接至测量仪器造成的。这就引入了温度依赖性误差，必须将其从温度测量值中减去，以获得高精度结果。

![带有冷端补偿的热电偶测量](https://www.maximintegrated.com/content/dam/images/design/tech-docs/1870/1870Fig14.gif) 

图14. 带有冷端补偿的热电偶测量

仪器测得的电压可表示为α(T1-Tref)，其中α为热电偶的塞贝克(Seebeck)常数，T1为被测温度，Tref为结温。为了补偿塞贝克系数，可增加一部分二极管引起的温度补偿电压(至热电偶输出)，或者可采集结温并利用软件计算补偿值。在这种方式下，利用差分输入通道AIN3-AIN4测量pn结的温度，由200µA内部电流发生器进行偏置。**高精度热电偶数据采集系统(DAS)** 作为MAX1402的替代品，[MAX11200/](https://www.maximintegrated.com/cn/products/MAX11200)[MAX11210](https://www.maximintegrated.com/cn/products/MAX11210)提供24位分辨率，支持高性能关键应用。图15所示为高精度DAS的的简化原理图，采用24位Σ-Δ ADC MAX11200评估板(EV)，支持热电偶温度测量。本例中，利用R1 - PT1000 (PTS 1206，1000Ω)测量冷结的绝对温度。该解决方案能够以±0.30°C或更高精度测量冷结温度1。

![热电偶DAS简化图](https://www.maximintegrated.com/content/dam/images/design/tech-docs/1870/1870Fig15.gif) 

图15. 热电偶DAS简化图

MAX11200的GPIO控制高精度多路复用器MAX4782，选择热电偶或PRTD R1 - PT1000。该方法可利用单个ADC实现热电偶或PRTD的动态测量。该设计提高了系统精度，降低了校准要求。**3线和4线RTD配置** 由于铂电阻温度检测器(RTD)具有优异的精度和可互换性，所以得到过程控制应用中关键温度测量的青睐。铂PRTD100在0°C时产生100Ω电阻，在+266°C时产生200Ω。RTD的灵敏度非常低(ΔR/ΔT = 100Ω/266°C)，激励电流为200µA时，0°C下产生20mV电压，+266°C下产生40mV电压。MAX1402的模拟输入可直接处理这些信号电平。线阻引起的误差会影响测量精度。当RTD靠近转换器时，您可使用传统的2线配置；但当RTD位于远端时，线阻叠加至RTD阻抗，引起较大的误差。对于这种安装类型，应采用3线和4线RTD配置。两路匹配的200µA电流源支持补偿3线和4线RTD配置中的误差。3线配置下(图16)，这些电流源通过RL1和RL2，确保AIN1-AIN2差分电压不受线阻的影响。如果两根线的材料相同、长度相等(RL1 = RL2)，电流源的温度系数完美匹配(MAX1402温度系数为5ppm/°C)，这种措施很有效。

![图16. 3线RTD应用。](https://www.maximintegrated.com/content/dam/images/design/tech-docs/1870/1870Fig16.gif) 

*图16. 3线RTD应用*

4线配置中，连接至AIN1和AIN2的测量线中没有电流通过，所以无线阻误差(图17)。电流源OUT1为RTD提供激励电流，电流源OUT2提供产生基准电压所需的电流。比例测量配置确保基准电压变动能够补偿RTD温度系数误差(RTD电流源的温漂引起)。

![4线RTD应用](https://www.maximintegrated.com/content/dam/images/design/tech-docs/1870/1870Fig17.gif) 

图17.4线RTD应用

**铂电阻温度检测器(PRTD)的高精度温度数据采集系统**

使用MAX11200的DAS提供精度非常高的PRTD测量系统，可用于支持较宽温度范围内不同电阻的RTD。常见的PRTD电阻有100Ω (PRTD100)、500Ω (PRTD500)和1000Ω (PRTD1000)。表1所示为PRTD100和PRTD1000器件的差分电压输出范围。右侧的一组公式计算MAX11200 ADC的无噪声编码个数。表1. 图18中ADC的温度测量范围TC (°C)VRT (mV)VRT (mV)Noise-free codes = (VMAX - VMIN)/Input-referred noise Noise-free codes = 82.46mV/2.86µVP-P Noise-free codes = 28,822 codes Temp (accy) = 210°C/28.82K Temp (accy) = 0.007°C PRTD100PRTD1000-5528.484.6036.1107.12038.9115.215557.1167.021028.7582.46注意，PRTD应用中输出信号的总范围为大约82mV。MAX11200具有极低的输入参考噪声，10sps时为570nV，使应用的无噪声分辨率在210°C量程时为0.007°C。

![本文中用于测量的高精度数据采集系统(DAS)的方框图](https://www.maximintegrated.com/content/dam/images/design/tech-docs/1870/1870Fig18.gif) 

图18. 本文中用于测量的高精度数据采集系统(DAS)的方框图

*基于MAX11200 ADC (图3)的DAS包括提供简单校准和计算产生的线性化。*如图18所示，MAX11200的GPIO1引脚设置为输出，控制继电器校准开关，同时选择固定RCAL电阻或PRTD。这种多功能性提高了系统精度，并减少了针对RA和RT初始值的计算。**智能4-20mA发送器** 在旧式4-20mA发送器中，现场安装的装置检测物理参数，例如压力或温度，并产生与被测变量成比例的电流(标准4-20mA范围)。电流环路的优点：测量信号对噪声不敏感，可由远端供电。为满足工业要求，人们开发了第二代4-20mA发送器(称为“智能”发送器)，利用微处理器和数据转换器远端调理信号。智能装置可标准化增益和失调，并线性化传感器，例如RTD和热电偶：转换为数字信号，利用µP中的数学算法进行处理，再转换回模拟信号，然后通过环路发送标准电流(图19)。第三代“智能和智慧”4-20mA发送器增加了数字通信功能(至智能装置)，与4-20mA信号共用双绞线。该通信通道也允许传输控制和诊断信号。MAX1402等低功耗器件比较适合，因为其250µA供电电流可为其余发送器电路节省可观的功率。

![图19. 智能4-20mA发送器。](https://www.maximintegrated.com/content/dam/images/design/tech-docs/1870/1870Fig19.gif) 

图19. 智能4-20mA发送器

智能发送器的通信标准为HART协议。HART协议基于Bell 202电话通信标准，采用频移键控(FSK)原理。数字信号包括分别代表1和0的两个频率(1200Hz和2200Hz)。为实现模拟和数字同时通信，这些频率的正弦波被叠加至直流模拟信号电缆(图20)。由于FSK信号的平均值总为零，所以不影响4-20mA模拟信号。数字通信信号的响应时间允许大约2-3次数据更新每秒，不中断模拟信号。通信要求的最小环路阻抗为23Ω。

![模拟和数字同时通信](https://www.maximintegrated.com/content/dam/images/design/tech-docs/1870/1870Fig20.gif) 

*图20. 模拟和数字同时通信*

总结高度集成调理系统出现之前，采用多片独立的信号调理和处理芯片实现过程控制。作为替代方法，Σ-Δ方案解决了最关键应用的性能要求，同时将电路板空间和电源要求(许多应用仅要求3V或5V单电源)降至最小。单电源工作尤其适合于电池供电的便携式系统，元件数量较少也提高了系统可靠性。